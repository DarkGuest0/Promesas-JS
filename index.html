<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulaciones JS con Promesas</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .output-line {
      padding: 0.25rem 0.5rem;
      border-left: 4px solid;
    }
    .status-info { border-color: #3b82f6; color: #3b82f6; }
    .status-success { border-color: #10b981; color: #10b981; }
    .status-error { border-color: #ef4444; color: #ef4444; }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="w-72 bg-white shadow-md p-4 overflow-y-auto">
      <h2 class="text-xl font-semibold mb-4">Simulaciones</h2>
      <div id="simulation-menu" class="space-y-2 overflow-y-auto max-h-[calc(100vh-6rem)]">
        <!-- Los botones ser谩n insertados por JS -->
      </div>
    </aside>

    <!-- Main content -->
    <main class="flex-1 p-6">
      <div class="mb-6">
        <h1 id="simulation-title" class="text-2xl font-bold mb-1">Seleccione una simulaci贸n</h1>
        <p id="simulation-description" class="text-gray-600">Elija una opci贸n del men煤 lateral para ver la descripci贸n.</p>
      </div>

      <div id="control-inputs" class="space-y-4 mb-4">
        <!-- Campos de entrada generados din谩micamente -->
      </div>

      <div class="flex items-center gap-4 mb-6">
        <button id="run-simulation" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50" disabled>讹 Ejecutar</button>
        <button id="clear-output" class="bg-gray-300 hover:bg-gray-400 px-4 py-2 rounded">Ч Limpiar</button>
      </div>

      <div id="output-area" class="bg-white p-4 rounded shadow-md h-64 overflow-y-auto text-sm space-y-2">
        <!-- Salida de la simulaci贸n -->
      </div>
    </main>
  </div>

  <!-- Simulations Script -->
  <script>
    // Pegaremos aqu铆 el objeto simulations y l贸gica completa
  </script>
  <script>
    // INICIO DE OBJETO SIMULATIONS
        const simulations = {
            'control-errores': {
                title: 'Control de Errores',
                description: 'Ejemplo cl谩sico de manejo de errores usando .catch() al final de una cadena de promesas.',
                inputs: [
                    { type: 'text', label: 'Nombre del archivo', id: 'filename', value: 'inexistente.txt' }
                ],
                execute: (inputs) => {
                    const filename = inputs.filename;
                    log('Iniciando simulaci贸n de control de errores...', 'info');
                    
                    // Simular la funci贸n leerArchivo
                    function leerArchivo(path) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (path && path !== 'inexistente.txt') {
                                    resolve("Contenido del archivo: " + path);
                                } else {
                                    reject("Error: Archivo no encontrado - " + path);
                                }
                            }, 1000);
                        });
                    }

                    leerArchivo(filename)
                        .then(contenido => {
                            log("Contenido: " + contenido, 'success');
                        })
                        .catch(err => {
                            log("Error: " + err, 'error');
                        });
                }
            },
            'sensores': {
                title: 'Sensores',
                description: 'Simula la lectura de un sensor (temperatura) que devuelve su valor tras un peque帽o retardo.',
                inputs: [],
                execute: () => {
                    log('Iniciando simulaci贸n de sensores...', 'info');
                    
                    function leerSensor() {
                        return new Promise(resolve => {
                            setTimeout(() => resolve("35掳C"), 1000);
                        });
                    }

                    leerSensor().then(temp => {
                        log("Temperatura: " + temp, 'success');
                    });
                }
            },
            'inicia-promesa': {
                title: 'Inicia Promesa',
                description: 'Se inicia una promesa con un valor inicial, y cada .then() transforma el resultado anterior. Ideal para procesos en cadena.',
                inputs: [
                    { type: 'number', label: 'Valor inicial', id: 'initialValue', value: '2' }
                ],
                execute: (inputs) => {
                    const initialValue = parseInt(inputs.initialValue);
                    log('Iniciando cadena de promesas...', 'info');
                    
                    Promise.resolve(initialValue)
                        .then(v => {
                            log(`Valor inicial: ${v}`, 'info');
                            return v * 2;
                        })
                        .then(v => {
                            log(`Despu茅s de multiplicar por 2: ${v}`, 'info');
                            return v + 1;
                        })
                        .then(v => {
                            log("Resultado final: " + v, 'success');
                        });
                }
            },
            'rechaza': {
                title: 'Rechaza',
                description: 'Ejecuta una promesa que se comporta diferente seg煤n el valor recibido. Muy 煤til para flujos condicionales.',
                inputs: [
                    { type: 'number', label: 'Valor a verificar', id: 'valor', value: '12' }
                ],
                execute: (inputs) => {
                    const valor = parseInt(inputs.valor);
                    log('Verificando valor...', 'info');
                    
                    function verificarValor(valor) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (valor > 10) {
                                    resolve("Valor v谩lido");
                                } else {
                                    reject("Valor demasiado bajo");
                                }
                            }, 1000);
                        });
                    }

                    verificarValor(valor)
                        .then(msg => {
                            log(msg, 'success');
                        })
                        .catch(err => {
                            log(err, 'error');
                        });
                }
            },
            'formulario': {
                title: 'Validaci贸n de Formulario',
                description: 'Cada campo de un formulario se valida individualmente con una promesa. El env铆o solo se realiza si todas las validaciones se cumplen.',
                inputs: [
                    { type: 'text', label: 'Nombre', id: 'nombre', value: 'Juan' },
                    { type: 'text', label: 'Correo', id: 'correo', value: 'juan@email.com' }
                ],
                execute: (inputs) => {
                    log('Iniciando validaci贸n de formulario...', 'info');
                    
                    function validarNombre(nombre) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                nombre ? resolve() : reject("Nombre requerido");
                            }, 500);
                        });
                    }

                    function validarCorreo(correo) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                correo.includes("@") ? resolve() : reject("Correo inv谩lido");
                            }, 500);
                        });
                    }

                    Promise.all([
                        validarNombre(inputs.nombre),
                        validarCorreo(inputs.correo)
                    ])
                        .then(() => {
                            log("Formulario v谩lido", 'success');
                        })
                        .catch(err => {
                            log("Error de validaci贸n: " + err, 'error');
                        });
                }
            },
            'secuecias': {
                title: 'Secuencias',
                description: 'Ejecuta varias funciones as铆ncronas en orden. Cada paso depende del anterior, lo cual es muy com煤n en flujos de procesamiento.',
                inputs: [],
                execute: () => {
                    log('Iniciando secuencia de pasos...', 'info');
                    
                    function paso1() {
                        return new Promise(resolve => {
                            setTimeout(() => resolve("Paso 1 completado"), 1000);
                        });
                    }

                    function paso2() {
                        return new Promise(resolve => {
                            setTimeout(() => resolve("Paso 2 completado"), 1000);
                        });
                    }

                    function paso3() {
                        return new Promise(resolve => {
                            setTimeout(() => resolve("Paso 3 completado"), 1000);
                        });
                    }

                    paso1()
                        .then(res1 => {
                            log(res1, 'info');
                            return paso2();
                        })
                        .then(res2 => {
                            log(res2, 'info');
                            return paso3();
                        })
                        .then(res3 => {
                            log(res3, 'success');
                        })
                        .catch(err => {
                            log(err, 'error');
                        });
                }
            },
            'tiempodiferentes': {
                title: 'Tiempo Diferentes',
                description: 'Simula operaciones que toman diferentes tiempos de ejecuci贸n.',
                inputs: [],
                execute: () => {
                    log('Iniciando operaciones con diferentes tiempos...', 'info');
                    
                    const promesa1 = new Promise(resolve => setTimeout(() => resolve("R谩pida (500ms)"), 500));
                    const promesa2 = new Promise(resolve => setTimeout(() => resolve("Media (1000ms)"), 1000));
                    const promesa3 = new Promise(resolve => setTimeout(() => resolve("Lenta (2000ms)"), 2000));

                    Promise.all([promesa1, promesa2, promesa3])
                        .then(resultados => {
                            log("Todas las operaciones completadas:", 'success');
                            resultados.forEach((resultado, index) => {
                                log(`Operaci贸n ${index + 1}: ${resultado}`, 'info');
                            });
                        });
                }
            },
            'json': {
                title: 'JSON',
                description: 'Simula el procesamiento de datos JSON.',
                inputs: [
                    { type: 'text', label: 'JSON de entrada', id: 'jsonInput', value: '{"nombre": "Juan", "edad": 25}' }
                ],
                execute: (inputs) => {
                    log('Procesando JSON...', 'info');
                    
                    try {
                        const datos = JSON.parse(inputs.jsonInput);
                        log("JSON v谩lido", 'success');
                        log("Datos: " + JSON.stringify(datos, null, 2), 'info');
                    } catch (error) {
                        log("Error al procesar JSON: " + error.message, 'error');
                    }
                }
            },
            'simuacion_database': {
                title: 'Simulaci贸n Database',
                description: 'Simula operaciones de base de datos.',
                inputs: [
                    { type: 'text', label: 'Consulta SQL', id: 'query', value: 'SELECT * FROM usuarios' }
                ],
                execute: (inputs) => {
                    log('Ejecutando consulta de base de datos...', 'info');
                    
                    function ejecutarQuery(query) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (query.toLowerCase().includes('select')) {
                                    resolve([
                                        { id: 1, nombre: 'Juan', email: 'juan@email.com' },
                                        { id: 2, nombre: 'Mar铆a', email: 'maria@email.com' }
                                    ]);
                                } else {
                                    reject("Consulta no v谩lida");
                                }
                            }, 1500);
                        });
                    }

                    ejecutarQuery(inputs.query)
                        .then(resultados => {
                            log("Consulta ejecutada exitosamente", 'success');
                            log("Resultados: " + JSON.stringify(resultados, null, 2), 'info');
                        })
                        .catch(err => {
                            log("Error en la consulta: " + err, 'error');
                        });
                }
            },
            'espera': {
                title: 'Espera',
                description: 'Simula operaciones que requieren esperar.',
                inputs: [
                    { type: 'number', label: 'Tiempo de espera (ms)', id: 'waitTime', value: '2000' }
                ],
                execute: (inputs) => {
                    const waitTime = parseInt(inputs.waitTime);
                    log(`Esperando ${waitTime}ms...`, 'info');
                    
                    new Promise(resolve => {
                        setTimeout(() => {
                            resolve("Espera completada");
                        }, waitTime);
                    })
                    .then(resultado => {
                        log(resultado, 'success');
                    });
                }
            },
            'reintetar': {
                title: 'Reintentar',
                description: 'Simula reintentos de operaciones fallidas.',
                inputs: [
                    { type: 'number', label: 'N煤mero de intentos', id: 'attempts', value: '3' }
                ],
                execute: (inputs) => {
                    const maxAttempts = parseInt(inputs.attempts);
                    let currentAttempt = 0;
                    
                    function intentarOperacion() {
                        currentAttempt++;
                        log(`Intento ${currentAttempt} de ${maxAttempts}...`, 'info');
                        
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (Math.random() > 0.5) {
                                    resolve("Operaci贸n exitosa");
                                } else {
                                    reject("Operaci贸n fallida");
                                }
                            }, 1000);
                        });
                    }

                    function reintentar() {
                        return intentarOperacion()
                            .then(resultado => {
                                log(resultado, 'success');
                            })
                            .catch(error => {
                                log(error, 'error');
                                if (currentAttempt < maxAttempts) {
                                    log("Reintentando...", 'info');
                                    return reintentar();
                                } else {
                                    throw new Error("M谩ximo n煤mero de intentos alcanzado");
                                }
                            });
                    }

                    reintentar();
                }
            },
            'cancelacion': {
                title: 'Cancelaci贸n',
                description: 'Simula la cancelaci贸n de operaciones.',
                inputs: [],
                execute: () => {
                    log('Iniciando operaci贸n cancelable...', 'info');
                    
                    let cancelada = false;
                    
                    const operacion = new Promise((resolve, reject) => {
                        const timeout = setTimeout(() => {
                            if (!cancelada) {
                                resolve("Operaci贸n completada");
                            }
                        }, 3000);
                        
                        // Simular cancelaci贸n despu茅s de 1.5 segundos
                        setTimeout(() => {
                            if (!cancelada) {
                                cancelada = true;
                                clearTimeout(timeout);
                                reject("Operaci贸n cancelada");
                            }
                        }, 1500);
                    });

                    operacion
                        .then(resultado => {
                            log(resultado, 'success');
                        })
                        .catch(error => {
                            log(error, 'error');
                        });
                }
            },
            'img_multipl': {
                title: 'Im谩genes M煤ltiples',
                description: 'Simula la carga de m煤ltiples im谩genes.',
                inputs: [
                    { type: 'text', label: 'URLs de im谩genes (separadas por coma)', id: 'imageUrls', value: 'img1.jpg,img2.jpg,img3.jpg' }
                ],
                execute: (inputs) => {
                    const urls = inputs.imageUrls.split(',').map(url => url.trim());
                    log(`Cargando ${urls.length} im谩genes...`, 'info');
                    
                    const promesas = urls.map((url, index) => {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (Math.random() > 0.2) {
                                    resolve(`Imagen ${index + 1} cargada: ${url}`);
                                } else {
                                    reject(`Error al cargar imagen ${index + 1}: ${url}`);
                                }
                            }, Math.random() * 2000 + 500);
                        });
                    });

                    Promise.allSettled(promesas)
                        .then(resultados => {
                            log("Proceso de carga completado", 'success');
                            resultados.forEach((resultado, index) => {
                                if (resultado.status === 'fulfilled') {
                                    log(resultado.value, 'success');
                                } else {
                                    log(resultado.reason, 'error');
                                }
                            });
                        });
                }
            },
            'verificacionseec': {
                title: 'Verificaci贸n',
                description: 'Simula procesos de verificaci贸n.',
                inputs: [
                    { type: 'text', label: 'C贸digo de verificaci贸n', id: 'code', value: '123456' }
                ],
                execute: (inputs) => {
                    log('Verificando c贸digo...', 'info');
                    
                    function verificarCodigo(codigo) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (codigo === '123456') {
                                    resolve("C贸digo verificado correctamente");
                                } else {
                                    reject("C贸digo incorrecto");
                                }
                            }, 1000);
                        });
                    }

                    verificarCodigo(inputs.code)
                        .then(resultado => {
                            log(resultado, 'success');
                        })
                        .catch(error => {
                            log(error, 'error');
                        });
                }
            },
            'simulacion_compras': {
                title: 'Simulaci贸n de Compras',
                description: 'Simula un proceso de compra donde primero se valida si hay stock disponible y luego se procesa el pago.',
                inputs: [
                    { type: 'text', label: 'Producto', id: 'producto', value: 'Laptop' },
                    { type: 'text', label: 'Tarjeta', id: 'tarjeta', value: '1234-5678-9012-3456' }
                ],
                execute: (inputs) => {
                    log('Iniciando simulaci贸n de compra...', 'info');
                    
                    function validarStock(producto) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (producto) {
                                    log("Stock validado para: " + producto, 'info');
                                    resolve();
                                } else {
                                    reject("Producto no disponible");
                                }
                            }, 1000);
                        });
                    }

                    function procesarPago(tarjeta) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (tarjeta && tarjeta.length > 10) {
                                    log("Pago procesado con tarjeta: " + tarjeta.substring(0, 4) + "****", 'info');
                                    resolve();
                                } else {
                                    reject("Error en el procesamiento del pago");
                                }
                            }, 1500);
                        });
                    }

                    validarStock(inputs.producto)
                        .then(() => procesarPago(inputs.tarjeta))
                        .then(() => {
                            log("Compra exitosa", 'success');
                        })
                        .catch(err => {
                            log("Error en la compra: " + err, 'error');
                        });
                }
            },
            'operacions': {
                title: 'Operaciones',
                description: 'Simula operaciones matem谩ticas as铆ncronas.',
                inputs: [
                    { type: 'number', label: 'N煤mero 1', id: 'num1', value: '10' },
                    { type: 'number', label: 'N煤mero 2', id: 'num2', value: '5' }
                ],
                execute: (inputs) => {
                    const num1 = parseInt(inputs.num1);
                    const num2 = parseInt(inputs.num2);
                    log('Realizando operaciones matem谩ticas...', 'info');
                    
                    Promise.all([
                        new Promise(resolve => setTimeout(() => resolve(num1 + num2), 500)),
                        new Promise(resolve => setTimeout(() => resolve(num1 - num2), 500)),
                        new Promise(resolve => setTimeout(() => resolve(num1 * num2), 500)),
                        new Promise(resolve => setTimeout(() => resolve(num1 / num2), 500))
                    ])
                    .then(([suma, resta, multiplicacion, division]) => {
                        log(`Suma: ${suma}`, 'success');
                        log(`Resta: ${resta}`, 'success');
                        log(`Multiplicaci贸n: ${multiplicacion}`, 'success');
                        log(`Divisi贸n: ${division}`, 'success');
                    });
                }
            },
            'leer_archv': {
                title: 'Leer Archivo',
                description: 'Simula la lectura de archivos.',
                inputs: [
                    { type: 'text', label: 'Nombre del archivo', id: 'filename', value: 'documento.txt' }
                ],
                execute: (inputs) => {
                    log('Leyendo archivo...', 'info');
                    
                    function leerArchivo(nombre) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (nombre.endsWith('.txt')) {
                                    resolve(`Contenido del archivo ${nombre}: Lorem ipsum dolor sit amet`);
                                } else {
                                    reject("Formato de archivo no soportado");
                                }
                            }, 1000);
                        });
                    }

                    leerArchivo(inputs.filename)
                        .then(contenido => {
                            log(contenido, 'success');
                        })
                        .catch(error => {
                            log(error, 'error');
                        });
                }
            },
            'obtener_prefil': {
                title: 'Obtener Perfil',
                description: 'Simula la obtenci贸n de perfiles de usuario.',
                inputs: [
                    { type: 'text', label: 'ID de usuario', id: 'userId', value: '123' }
                ],
                execute: (inputs) => {
                    log('Obteniendo perfil de usuario...', 'info');
                    
                    function obtenerPerfil(id) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (id && id !== '0') {
                                    resolve({
                                        id: id,
                                        nombre: 'Usuario ' + id,
                                        email: 'usuario' + id + '@email.com',
                                        edad: 25 + parseInt(id) % 20
                                    });
                                } else {
                                    reject("Usuario no encontrado");
                                }
                            }, 1000);
                        });
                    }

                    obtenerPerfil(inputs.userId)
                        .then(perfil => {
                            log("Perfil obtenido", 'success');
                            log("Datos: " + JSON.stringify(perfil, null, 2), 'info');
                        })
                        .catch(error => {
                            log(error, 'error');
                        });
                }
            },
            'localizacion_usuario': {
                title: 'Localizaci贸n Usuario',
                description: 'Simula la obtenci贸n de la ubicaci贸n del usuario.',
                inputs: [],
                execute: () => {
                    log('Obteniendo ubicaci贸n del usuario...', 'info');
                    
                    function obtenerUbicacion() {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (navigator.geolocation) {
                                    resolve({
                                        latitud: 40.7128,
                                        longitud: -74.0060,
                                        ciudad: 'Nueva York'
                                    });
                                } else {
                                    reject("Geolocalizaci贸n no disponible");
                                }
                            }, 1500);
                        });
                    }

                    obtenerUbicacion()
                        .then(ubicacion => {
                            log("Ubicaci贸n obtenida", 'success');
                            log(`Latitud: ${ubicacion.latitud}`, 'info');
                            log(`Longitud: ${ubicacion.longitud}`, 'info');
                            log(`Ciudad: ${ubicacion.ciudad}`, 'info');
                        })
                        .catch(error => {
                            log(error, 'error');
                        });
                }
            },
            'envia_form': {
                title: 'Enviar Formulario',
                description: 'Simula el env铆o de formularios.',
                inputs: [
                    { type: 'text', label: 'Nombre', id: 'nombre', value: 'Juan P茅rez' },
                    { type: 'text', label: 'Email', id: 'email', value: 'juan@email.com' },
                    { type: 'text', label: 'Mensaje', id: 'mensaje', value: 'Hola mundo' }
                ],
                execute: (inputs) => {
                    log('Enviando formulario...', 'info');
                    
                    function enviarFormulario(datos) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (datos.nombre && datos.email && datos.mensaje) {
                                    resolve("Formulario enviado exitosamente");
                                } else {
                                    reject("Datos incompletos");
                                }
                            }, 2000);
                        });
                    }

                    enviarFormulario(inputs)
                        .then(resultado => {
                            log(resultado, 'success');
                        })
                        .catch(error => {
                            log(error, 'error');
                        });
                }
            },
            'cargas_img': {
                title: 'Cargar Im谩genes',
                description: 'Simula la carga de im谩genes.',
                inputs: [
                    { type: 'text', label: 'URL de la imagen', id: 'imageUrl', value: 'https://ejemplo.com/imagen.jpg' }
                ],
                execute: (inputs) => {
                    log('Cargando imagen...', 'info');
                    
                    function cargarImagen(url) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (url.includes('http')) {
                                    resolve("Imagen cargada: " + url);
                                } else {
                                    reject("URL inv谩lida");
                                }
                            }, 1500);
                        });
                    }

                    cargarImagen(inputs.imageUrl)
                        .then(resultado => {
                            log(resultado, 'success');
                        })
                        .catch(error => {
                            log(error, 'error');
                        });
                }
            },
            'validacion_Login': {
                title: 'Validaci贸n Login',
                description: 'Simula la validaci贸n de credenciales de login.',
                inputs: [
                    { type: 'text', label: 'Usuario', id: 'usuario', value: 'admin' },
                    { type: 'password', label: 'Contrase帽a', id: 'password', value: '123456' }
                ],
                execute: (inputs) => {
                    log('Validando credenciales...', 'info');
                    
                    function validarLogin(usuario, password) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (usuario === 'admin' && password === '123456') {
                                    resolve("Login exitoso");
                                } else {
                                    reject("Credenciales incorrectas");
                                }
                            }, 1000);
                        });
                    }

                    validarLogin(inputs.usuario, inputs.password)
                        .then(resultado => {
                            log(resultado, 'success');
                        })
                        .catch(error => {
                            log(error, 'error');
                        });
                }
            },
            'api': {
                title: 'API',
                description: 'Simula llamadas a APIs.',
                inputs: [
                    { type: 'text', label: 'Endpoint', id: 'endpoint', value: '/api/usuarios' }
                ],
                execute: (inputs) => {
                    log('Llamando a la API...', 'info');
                    
                    function llamarAPI(endpoint) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (endpoint.includes('/api/')) {
                                    resolve({
                                        status: 200,
                                        data: [
                                            { id: 1, nombre: 'Usuario 1' },
                                            { id: 2, nombre: 'Usuario 2' }
                                        ]
                                    });
                                } else {
                                    reject("Endpoint no v谩lido");
                                }
                            }, 1500);
                        });
                    }

                    llamarAPI(inputs.endpoint)
                        .then(response => {
                            log("API llamada exitosamente", 'success');
                            log("Respuesta: " + JSON.stringify(response, null, 2), 'info');
                        })
                        .catch(error => {
                            log(error, 'error');
                        });
                }
            },
            'setTimeout': {
                title: 'SetTimeout',
                description: 'Simula operaciones con setTimeout.',
                inputs: [
                    { type: 'number', label: 'Tiempo (ms)', id: 'time', value: '2000' }
                ],
                execute: (inputs) => {
                    const tiempo = parseInt(inputs.time);
                    log(`Ejecutando setTimeout de ${tiempo}ms...`, 'info');
                    
                    new Promise(resolve => {
                        setTimeout(() => {
                            resolve("Operaci贸n completada despu茅s de " + tiempo + "ms");
                        }, tiempo);
                    })
                    .then(resultado => {
                        log(resultado, 'success');
                    });
                }
            },
            'Macroalgoritmo': {
                title: 'Macro Algoritmo',
                description: 'Simula la lectura de un archivo local, como si fuera una operaci贸n asincr贸nica que puede tardar o fallar.',
                inputs: [
                    { type: 'text', label: 'Ruta del archivo', id: 'filepath', value: 'documento.txt' }
                ],
                execute: (inputs) => {
                    log('Iniciando macro algoritmo...', 'info');
                    
                    function leerArchivo(path) {
                        return new Promise((resolve, reject) => {
                            setTimeout(() => {
                                if (path) {
                                    resolve("Contenido le铆do del archivo: " + path);
                                } else {
                                    reject("Error al leer archivo");
                                }
                            }, 1000);
                        });
                    }

                    leerArchivo(inputs.filepath)
                        .then(contenido => {
                            log(contenido, 'success');
                        })
                        .catch(err => {
                            log("Error: " + err, 'error');
                        });
                }
            }
        };
    const simulationTitle = document.getElementById('simulation-title');
    const simulationDescription = document.getElementById('simulation-description');
    const controlInputs = document.getElementById('control-inputs');
    const runButton = document.getElementById('run-simulation');
    const outputArea = document.getElementById('output-area');
    const clearButton = document.getElementById('clear-output');
    const simulationMenu = document.getElementById('simulation-menu');

    let currentSimulation = null;

    function log(message, type = 'info') {
      const outputLine = document.createElement('div');
      outputLine.className = `output-line status-${type}`;
      outputLine.innerHTML = message;
      outputArea.appendChild(outputLine);
      outputArea.scrollTop = outputArea.scrollHeight;
    }

    function clearOutput() {
      outputArea.innerHTML = '';
    }

    function createInputs(inputs) {
      if (!inputs || inputs.length === 0) {
        return '<p class="text-sm text-gray-500">Esta simulaci贸n no requiere par谩metros de entrada</p>';
      }

      let html = '';
      inputs.forEach(input => {
        html += `
          <div class="flex flex-col">
            <label for="${input.id}" class="text-sm font-medium mb-1">${input.label}</label>
            <input type="${input.type}" id="${input.id}" value="${input.value || ''}" class="border rounded px-3 py-1" />
          </div>
        `;
      });
      return html;
    }

    function getInputValues() {
      const inputs = {};
      const inputElements = controlInputs.querySelectorAll('input, select');
      inputElements.forEach(input => {
        inputs[input.id] = input.value;
      });
      return inputs;
    }

    function changeSimulation(simulationId) {
      document.querySelectorAll('.simulation-btn').forEach(btn => btn.classList.remove('bg-blue-100'));
      document.querySelector(`[data-sim="${simulationId}"]`).classList.add('bg-blue-100');

      const simulation = simulations[simulationId];
      if (simulation) {
        currentSimulation = simulationId;
        simulationTitle.textContent = simulation.title;
        simulationDescription.textContent = simulation.description;
        controlInputs.innerHTML = createInputs(simulation.inputs);
        runButton.disabled = false;
        runButton.textContent = `讹 Ejecutar ${simulation.title}`;
      }
    }

    runButton.addEventListener('click', () => {
      if (currentSimulation && simulations[currentSimulation]) {
        clearOutput();
        const inputs = getInputValues();
        try {
          simulations[currentSimulation].execute(inputs);
        } catch (error) {
          log('Error al ejecutar la simulaci贸n: ' + error.message, 'error');
        }
      }
    });

    clearButton.addEventListener('click', clearOutput);

    window.addEventListener('DOMContentLoaded', () => {
      for (const [id, sim] of Object.entries(simulations)) {
        const btn = document.createElement('button');
        btn.className = 'simulation-btn w-full text-left px-3 py-2 rounded hover:bg-blue-50';
        btn.textContent = sim.title;
        btn.setAttribute('data-sim', id);
        btn.addEventListener('click', () => {
          changeSimulation(id);
          clearOutput();
          log(`Simulaci贸n seleccionada: ${sim.title}`, 'info');
        });
        simulationMenu.appendChild(btn);
      }
      log('Panel de Simulaciones JavaScript inicializado', 'success');
      log('Selecciona una simulaci贸n del men煤 lateral para comenzar', 'info');
    });

    const originalConsoleLog = console.log;
    const originalConsoleError = console.error;
    console.log = (...args) => {
      originalConsoleLog(...args);
      log(args.join(' '), 'info');
    };
    console.error = (...args) => {
      originalConsoleError(...args);
      log(args.join(' '), 'error');
    };
  </script>
</body>
</html>
